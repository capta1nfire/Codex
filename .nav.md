# üß≠ CODEX Quick Navigation

<!-- 
Last Updated: 2025-01-14
Update Frequency: Major structural changes only
Maintainer: Development Team

WHEN TO UPDATE THIS FILE:
- New major feature/workflow added
- Directory structure changes
- API versioning changes
- New services added
- Deprecated features removed

DO NOT UPDATE FOR:
- Minor bugfixes
- Small UI changes
- Documentation updates
- Test additions
-->

> **Purpose**: Quick reference for navigating the CODEX project efficiently

## üóÇÔ∏è Key Directories

### üì± Frontend
- **Main App**: `/frontend/src/app/`
- **Components**: `/frontend/src/components/`
- **UI Library**: `/frontend/src/components/ui/`
- **Hooks**: `/frontend/src/hooks/`
  - v2 Hooks: `useBarcodeGenerationV2.ts`, `useQREngineV2.ts`
- **Schemas**: `/frontend/src/schemas/`

### üõ†Ô∏è Backend
- **Entry Point**: `/backend/src/index.ts`
- **Routes**: `/backend/src/routes/`
- **Services**: `/backend/src/services/`
- **Middleware**: `/backend/src/middleware/`
- **Schemas**: `/backend/src/schemas/`
- **Database**: `/backend/prisma/`

### ü¶Ä Rust Generator
- **Main**: `/rust_generator/src/main.rs`
- **Engine**: `/rust_generator/src/engine/`
- **Routes**: `/rust_generator/src/routes/`
- **Processing**: `/rust_generator/src/processing/`

### üìö Documentation
- **Main Docs**: `/docs/`
- **API Docs**: `/docs/api/`
- **FLODEX Guides**: `/docs/flodex/`
  - Cross-Service Guide: `CROSS_SERVICE_FEATURES_GUIDE.md`
  - Feature Docs: `/docs/flodex/features/`
- **QR Engine**: `/docs/qr-engine/`
- **Technical**: `/docs/technical/`

## üéØ Common Workflows

### Add HTTP Endpoint
1. `/backend/src/routes/{feature}.routes.ts` - Define routes
2. `/backend/src/services/{feature}Service.ts` - Business logic
3. `/backend/src/schemas/{feature}Schemas.ts` - Validation
4. `/backend/src/__tests__/{feature}.test.ts` - Tests
5. `/docs/api/README.md` - Documentation

### Add UI Component
1. `/frontend/src/components/{Component}.tsx` - Component
2. `/frontend/src/hooks/use{Feature}.ts` - Custom hook (if needed)
3. `/frontend/src/app/{page}/page.tsx` - Use in page
4. `/frontend/src/components/ui/` - Reusable UI elements

### Add Barcode Type
1. `/rust_generator/src/engine/types.rs` - Define type
2. `/rust_generator/src/engine/generator.rs` - Generation logic
3. `/frontend/src/constants/barcodeTypes.ts` - Frontend constant
4. `/backend/src/schemas/generateSchemas.ts` - Validation

### Modify Database
1. `/backend/prisma/schema.prisma` - Update schema
2. `cd backend && npx prisma migrate dev` - Create migration
3. `/backend/src/services/` - Update services
4. `/backend/src/__tests__/` - Update tests

## üîß Configuration Files

### Service Management
- **PM2 Config**: `/ecosystem.config.js`
- **Start Script**: `/pm2-start.sh`
- **Stop Script**: `/stop-services.sh`

### Build Configs
- **Frontend**: `/frontend/next.config.js`
- **Backend**: `/backend/tsconfig.json`
- **Rust**: `/rust_generator/Cargo.toml`

### Environment
- **Backend**: `/backend/.env`
- **Frontend**: `/frontend/.env.local`
- **Example**: `/frontend/env.example`

## üìç Quick Commands

### Service Management
```bash
./pm2-start.sh          # Start all services
./stop-services.sh      # Stop all services
pm2 logs               # View all logs
pm2 status             # Check status
```

### API Quick Tests
```bash
# QR v2 (High Performance)
curl -X POST http://localhost:3004/api/v2/qr \
  -H "Content-Type: application/json" \
  -d '{"data": "https://example.com", "options": {"size": 300}}'

# Barcode v1 (Other Types)
curl -X POST http://localhost:3004/api/v1/barcode \
  -H "Content-Type: application/json" \
  -d '{"barcode_type": "code128", "data": "123456789"}'

# Legacy endpoints (deprecated - use v1/v2 instead)
# /api/generate, /api/qr/*
```

### Testing
```bash
# Backend
cd backend && npm test
cd backend && npm run test:watch
cd backend && npm run test:coverage

# Frontend
cd frontend && npm test
cd frontend && npm run test:e2e

# Rust
cd rust_generator && cargo test
```

### Development
```bash
# Type checking
cd backend && npx tsc --noEmit
cd frontend && npx tsc --noEmit

# Linting
cd backend && npm run lint
cd frontend && npm run lint

# Database
cd backend && npx prisma studio
cd backend && npx prisma migrate dev
```

## üé® Design System

### Colors
- **Primary**: Blue-600 ‚Üí Blue-700
- **Text**: Slate color scale
- **Background**: White/Slate-50
- **Dark Mode**: Slate-900/Black

### Components
- **Buttons**: `/frontend/src/components/ui/button.tsx`
- **Cards**: `/frontend/src/components/ui/card.tsx`
- **Forms**: `/frontend/src/components/ui/input.tsx`
- **Tables**: `/frontend/src/components/ui/table.tsx`

### Tailwind Classes
```css
/* Spacing */
p-4 m-2 space-y-4

/* Colors */
text-slate-700 dark:text-slate-300
bg-blue-600 hover:bg-blue-700

/* Responsive */
w-full md:w-1/2 lg:w-1/3
```

## üö® Important Files

### Documentation
1. `CONTEXT_SUMMARY.md` - Project overview & rules
2. `CODEX.md` - Strategic roadmap
3. `CLAUDE.md` - AI agent guide
4. `README.md` - Technical setup
5. `/docs/api/v1-v2-migration-guide.md` - API versioning guide

### Logs & Monitoring
- Backend Logs: `/backend/logs/`
- PM2 Logs: `pm2 logs`
- Session Logs: `/.workspace/session-logs/`

### Critical Services
- **Backend API**: `http://localhost:3004`
- **Frontend**: `http://localhost:3000`
- **Rust Generator**: `http://localhost:3002`
- **PostgreSQL**: `localhost:5432`
- **Redis**: `localhost:6379`

## üîç Search Patterns

### Find React Components
```bash
grep -r "export.*function\|export.*const" frontend/src/components
```

### Find API Endpoints
```bash
grep -r "router\.(get\|post\|put\|delete)" backend/src/routes
```

### Find TODOs
```bash
grep -r "TODO\|FIXME" --include="*.ts" --include="*.tsx"
```

### Find Recent Changes
```bash
./scripts/ai-helpers/recent-changes.sh 1
```

### Check FOCUS Compliance
```bash
./scripts/validate-focus.sh
```

### Validate FLODEX Architecture
```bash
./scripts/validate-flodex.sh  # Check compliance
./scripts/flodex-metrics      # View metrics dashboard
```

## üí° Tips

1. **Always read**: `START_HERE.md` before starting
2. **FOCUS**: 80% code, 20% docs - NO new files without permission
3. **FLODEX**: Keep services independent - validate with `./scripts/validate-flodex.sh`
4. **Use PM2**: Never use `npm run dev` directly
5. **Check types**: Run TypeScript checks before committing
6. **Test first**: Write tests for new features
7. **Document**: Update service READMEs for service-specific docs
8. **API Version**: QR ‚Üí v2 (performance), Others ‚Üí v1 (stable)
9. **Every 30 min**: Run `./scripts/validate-focus.sh`
10. **Before commit**: Run `./scripts/validate-flodex.sh`

---
*Quick navigation for efficient CODEX development*